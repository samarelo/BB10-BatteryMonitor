<!DOCTYPE HTML PUBLIC>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" type="text/css" href="bbui/bbui-0.9.4.css" />
	</head>
	<body>
		<script type="text/javascript" src="bbui/bbui-0.9.4.js"></script>
		<script type="text/javascript" src='local:///chrome/webworks.js'></script>
		<script id="batteryJS" type="text/javascript" src="js/battery.js"></script>
		<script type="text/javascript">
			function onwebworksready() {
				console.log('onwebworksready');
				document.removeEventListener('webworksready', onwebworksready, false);
				// setup batteryMonitor
				var saBatteryMon = batteryMonitor();

				bb.init({
					actionBarDark : true,
					controlsDark : true,
					listsDark : false,
					bb10ForPlayBook : false,
					ondomready : function(element, id) {
						console.log("domready");

						// initialize battery monitor is dom is ready
						saBatteryMon.init({
							curState : 'currentState',
							logger : 'logsOutput',
							startButton : 'startButton',
							stopButton : 'stopButton',
							tabs : ['main', 'stats', 'about'],
							selectYear : 'selectYear',
							selectMonth : 'selectMonth',
							selectDay : 'selectDay',
							filterMonth : 'filterMonth',
							filterDay : 'filterDay',
							totalDrain : 'statsTotalDraining',
							totalCharge : 'statsTotalCharging',
							avgDrain : 'statsAvgDrain',
							avgCharge : 'statsAvgCharge',
							sessionNum : 'statsSessionNum',
							avgLevel : 'statsAvgLevel',
							isTesting : false
						}, function() {
							console.log("battery monitor has been initialized");
							var ele = null;
							document.getElementById("tab_about").setAttribute("onclick", function() {
								saBatteryMon.showTab('main');
							});
							document.getElementById("tab_stats").setAttribute("onclick", function() {
								saBatteryMon.showTab("stats");
							});
							document.getElementById("tab_main").setAttribute("onclick", function() {
								saBatteryMon.showTab("main");
							});

						});
					}
				});
				bb.pushScreen('battery.html', 'battery');
			}

			function onload() {
				console.log("onload");
				window.removeEventListener('load', onload, false);
				document.addEventListener('webworksready', onwebworksready, false)
			}


			window.addEventListener('load', onload, false);
		</script>
	</body>

</html>
